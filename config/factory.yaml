# facet run -c config/factory.yaml:SimpleMemory:Install

Install:
    install:
        filename: data/install/american-english
        nrows: 10000

UMLSInstall:
    install:
        filename: data/umls/MRCONSO.RRF
        delimiter: "|"
        cols: 14
        nrows: 38000

AutoMemory:
    query: data/sample.txt
    formatter: json
    output: annotations.json

SimpleMemory: {}

SimpleFile:
    matcher:
        class: simstring
        db:
            class: dict
            filename: db/testing
            access_mode: n
            use_pipeline: true

SimpleRedis:
    matcher:
        class: simstring
        db:
            class: redis
            index: 3
            access_mode: n
            use_pipeline: true

SimpleRediSearch:
    matcher:
        class: redisearch
        db:
            host: localhost
            port: 7001
            n: 1
            index: test
            access_mode: n
            use_pipeline: true
        cache_db: dict

SimpleRediSearchSimstring:
    matcher:
        class: redisearch-simstring
        db:
            host: localhost
            port: 7001
            index: facet
            access_mode: n
            use_pipeline: true
        cache_db: dict

SimpleRediSearchAC:
    matcher:
        class: redisearch-autocompleter
        db:
            host: localhost
            port: 7001
            n: 2
            key: facet-ac
            access_mode: n
            use_pipeline: true
        cache_db: dict

SimpleSQLite:
    matcher:
        class: simstring
        db:
            class: sqlite
            access_mode: n
            use_pipeline: true

SimpleMongo:
    matcher:
        class: mongo-simstring
        db:
            access_mode: n
            use_pipeline: true

SimpleElasticsearch:
    matcher:
        class: elasticsearch-simstring
        db:
            access_mode: n
            use_pipeline: true
            thread_count: 8

Tokenizer:
    matcher:
        class: redisearch
        db:
            port: 7001
            use_pipeline: true
        similarity: levenshtein
    tokenizer:
        class: spacy
        mode: noun_chunks
        # window: 3
        converters: lower
        min_token_length: 2
        use_stopwords: true


FacetMemory:
    class: facet
    matcher:
        class: simstring
        db: dict
        alpha: 0.7
        similarity: jaccard
        ngram: character
    tokenizer: alphanumeric
    formatter: json
    install:
        filename: data/umls/MRCONSO.RRF
        delimiter: "|"
        cols: 14


FacetFile:
    class: facet
    matcher:
        class: simstring
        db:
            class: dict
            filename: db/simstring
            use_pipeline: true
        alpha: 0.7
        similarity: jaccard
        ngram: character
    tokenizer: alphanumeric
    formatter: json
    use_proxy_install: true
    install:
        filename: data/umls/MRCONSO.RRF
        delimiter: "|"
        cols: 14


FacetRedis:
    class: facet
    matcher:
        class: simstring
        db:
            class: redis
            host: localhost
            port: 6379
            index: 3
            access_mode: c
            use_pipeline: true
        cache_db: null
        alpha: 0.7
        similarity: jaccard
        ngram: character
    tokenizer: alphanumeric
    formatter: json
    use_proxy_install: true
    install:
        filename: data/umls/MRCONSO.RRF
        delimiter: "|"
        cols: 14


FacetSQL:
    class: facet
    matcher:
        class: simstring
        db:
            class: sqlite
            uri: db/simstring
            table: facet
            access_mode: c
            serializer: pickle
            check_same_thread: false
        cache_db: null
        alpha: 0.7
        similarity: jaccard
        ngram: character
    tokenizer: alphanumeric
    formatter: json
    use_proxy_install: true
    install:
        filename: data/umls/MRCONSO.RRF
        delimiter: "|"
        cols: 14


FacetES:
    class: facet
    matcher:
        class: elasticsearch-simstring
        db:
            index: facet
            hosts: localhost:9200
            use_pipeline: true
            access_mode: c
        cache_db: null
        alpha: 0.7
        similarity: jaccard
        ngram: character
    tokenizer: alphanumeric
    formatter: json
    install:
        filename: data/umls/MRCONSO.RRF
        delimiter: "|"
        cols: 14


FacetMongo:
    class: facet
    matcher:
        class: mongo-simstring
        db:
            database: facet
            host: localhost
            port: 27017
            use_pipeline: true
            access_mode: c
        cache_db: null
        alpha: 0.7
        similarity: jaccard
        ngram: character
    tokenizer: alphanumeric
    formatter: json
    install:
        filename: data/umls/MRCONSO.RRF
        delimiter: "|"
        cols: 14


FacetESFuzzy:
    class: facet
    matcher:
        class: elasticsearch-fuzzy
        db:
            index: facet
            hosts: localhost:9200
            use_pipeline: true
            access_mode: c
        cache_db: null
    tokenizer: alphanumeric
    formatter: json
    install:
        filename: data/umls/MRCONSO.RRF
        delimiter: "|"
        cols: 14


UMLSMemory:
    class: umlsfacet
    conso_db: dict
    cuisty_db: dict
    matcher:
        class: simstring
        db: dict
        alpha: 0.7
        similarity: jaccard
        ngram: character
    tokenizer: alphanumeric
    formatter: json
    install: data/umls


UMLSFile:
    class: umlsfacet
    conso_db:
        class: dict
        filename: db/conso
        use_pipeline: true
    cuisty_db:
        class: dict
        filename: db/cuisty
        use_pipeline: true
    matcher:
        class: simstring
        db:
            class: dict
            filename: db/simstring
            use_pipeline: true
        alpha: 0.7
        similarity: jaccard
        ngram: character
    tokenizer: alphanumeric
    formatter: json
    use_proxy_install: true
    install: data/umls


UMLSRedis:
    class: umlsfacet
    conso_db:
        class: redis
        host: localhost
        port: 6379
        index: 0
        access_mode: c
        serializer: pickle
        use_pipeline: true
    cuisty_db:
        class: redis
        host: localhost
        port: 6379
        index: 1
        access_mode: c
        serializer: pickle
        use_pipeline: true
    matcher:
        class: simstring
        db:
            class: redis
            host: localhost
            port: 6379
            index: 2
            access_mode: c
            serializer: pickle
            use_pipeline: true
        cache_db: null
        alpha: 0.7
        similarity: jaccard
        ngram: character
    tokenizer: alphanumeric
    formatter: json
    use_proxy_install: true
    install: data/umls


UMLSSQL:
    class: umlsfacet
    conso_db:
        class: sqlite
        uri: db/umls
        table: conso
        access_mode: c
        serializer: pickle
        check_same_thread: false
    cuisty_db:
        class: sqlite
        uri: db/umls
        table: cuisty
        access_mode: c
        serializer: pickle
        check_same_thread: false
    matcher:
        class: simstring
        db:
            class: sqlite
            uri: db/umls
            table: simstring
            access_mode: c
            serializer: pickle
            check_same_thread: false
        cache_db: null
        alpha: 0.7
        similarity: jaccard
        ngram: character
    tokenizer: alphanumeric
    formatter: json
    use_proxy_install: true
    install: data/umls


UMLSESS:
    class: umlsfacet
    conso_db:
        class: sqlite
        filename: db/umls
        table: conso
        access_mode: c
        serializer: pickle
        check_same_thread: false
    cuisty_db:
        class: sqlite
        filename: db/umls
        table: cuisty
        access_mode: c
        serializer: pickle
        check_same_thread: false
    matcher:
        class: elasticsearch-simstring
        db:
            index: umls
            hosts: localhost:9200
            use_pipeline: true
            access_mode: c
        cache_db: null
        alpha: 0.7
        similarity: jaccard
        ngram: character
    tokenizer: alphanumeric
    formatter: json
    install: data/umls


UMLSESR:
    class: umlsfacet
    conso_db:
        class: redis
        host: localhost
        port: 6379
        index: 0
        access_mode: c
        use_pipeline: true
    cuisty_db:
        class: redis
        host: localhost
        port: 6379
        index: 1
        access_mode: c
        use_pipeline: true
    matcher:
        class: elasticsearch-simstring
        db:
            index: umls
            hosts: localhost:9200
            use_pipeline: true
            access_mode: c
        cache_db: null
        alpha: 0.7
        similarity: jaccard
        ngram: character
    tokenizer: alphanumeric
    formatter: json
    install: data/umls


UMLSMongo:
    class: umlsfacet
    conso_db:
        class: sqlite
        filename: db/umls
        table: conso
        access_mode: c
        serializer: pickle
        check_same_thread: false
    cuisty_db:
        class: sqlite
        filename: db/umls
        table: cuisty
        access_mode: c
        serializer: pickle
        check_same_thread: false
    matcher:
        class: mongo-simstring
        db:
            database: umls
            host: localhost
            port: 27017
            use_pipeline: true
            access_mode: c
        cache_db: null
        alpha: 0.7
        similarity: jaccard
        ngram: character
    tokenizer: alphanumeric
    formatter: json
    install: data/umls
